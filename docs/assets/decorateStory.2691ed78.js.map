{"version":3,"file":"decorateStory.2691ed78.js","sources":["../../node_modules/@storybook/vue3/dist/esm/client/preview/render.js","../../node_modules/@storybook/vue3/dist/esm/client/preview/decorateStory.js"],"sourcesContent":["var _templateObject;\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.object.freeze.js\";\nimport dedent from 'ts-dedent';\nimport { createApp, h, shallowRef } from 'vue';\nexport var render = function render(props, context) {\n  var id = context.id,\n      Component = context.component;\n\n  if (!Component) {\n    throw new Error(\"Unable to render story \".concat(id, \" as the component annotation is missing from the default export\"));\n  } // TODO remove this hack\n\n\n  return h(Component, props);\n};\nexport var activeStoryComponent = shallowRef(null);\nvar root = null;\nexport var storybookApp = createApp({\n  // If an end-user calls `unmount` on the app, we need to clear our root variable\n  unmounted: function unmounted() {\n    root = null;\n  },\n  setup: function setup() {\n    return function () {\n      if (!activeStoryComponent.value) throw new Error('No Vue 3 Story available. Was it set correctly?');\n      return h(activeStoryComponent.value);\n    };\n  }\n});\nexport function renderToDOM(_ref, domElement) {\n  var title = _ref.title,\n      name = _ref.name,\n      storyFn = _ref.storyFn,\n      showMain = _ref.showMain,\n      showError = _ref.showError,\n      showException = _ref.showException;\n  storybookApp.config.errorHandler = showException;\n  var element = storyFn();\n\n  if (!element) {\n    showError({\n      title: \"Expecting a Vue component from the story: \\\"\".concat(name, \"\\\" of \\\"\").concat(title, \"\\\".\"),\n      description: dedent(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n        Did you forget to return the Vue component from the story?\\n        Use \\\"() => ({ template: '<my-comp></my-comp>' })\\\" or \\\"() => ({ components: MyComp, template: '<my-comp></my-comp>' })\\\" when defining the story.\\n      \"])))\n    });\n    return;\n  }\n\n  showMain();\n  activeStoryComponent.value = element;\n\n  if (!root) {\n    root = storybookApp.mount(domElement);\n  }\n}","import \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.assign.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport { h } from 'vue';\nimport { sanitizeStoryContextUpdate } from '@storybook/store';\n\n/*\n  This normalizes a functional component into a render method in ComponentOptions.\n\n  The concept is taken from Vue 3's `defineComponent` but changed from creating a `setup`\n  method on the ComponentOptions so end-users don't need to specify a \"thunk\" as a decorator.\n */\nfunction normalizeFunctionalComponent(options) {\n  return typeof options === 'function' ? {\n    render: options,\n    name: options.name\n  } : options;\n}\n\nfunction prepare(rawStory, innerStory) {\n  var story = rawStory;\n\n  if (story == null) {\n    return null;\n  }\n\n  if (innerStory) {\n    return Object.assign({}, normalizeFunctionalComponent(story), {\n      components: Object.assign({}, story.components || {}, {\n        story: innerStory\n      })\n    });\n  }\n\n  return {\n    render: function render() {\n      return h(story);\n    }\n  };\n}\n\nexport function decorateStory(storyFn, decorators) {\n  return decorators.reduce(function (decorated, decorator) {\n    return function (context) {\n      var story;\n      var decoratedStory = decorator(function (update) {\n        story = decorated(Object.assign({}, context, sanitizeStoryContextUpdate(update)));\n        return story;\n      }, context);\n\n      if (!story) {\n        story = decorated(context);\n      }\n\n      if (decoratedStory === story) {\n        return story;\n      }\n\n      return prepare(decoratedStory, story);\n    };\n  }, function (context) {\n    return prepare(storyFn(context));\n  });\n}"],"names":["_templateObject","_taggedTemplateLiteral","strings","raw","render","props","context","id","Component","h","activeStoryComponent","shallowRef","root","storybookApp","createApp","renderToDOM","_ref","domElement","title","name","storyFn","showMain","showError","showException","element","dedent","normalizeFunctionalComponent","options","prepare","rawStory","innerStory","story","decorateStory","decorators","decorated","decorator","decoratedStory","update","sanitizeStoryContextUpdate"],"mappings":"gHAAA,IAAIA,EAEJ,SAASC,EAAuBC,EAASC,EAAK,CAAE,OAAKA,IAAOA,EAAMD,EAAQ,MAAM,CAAC,GAAY,OAAO,OAAO,OAAO,iBAAiBA,EAAS,CAAE,IAAK,CAAE,MAAO,OAAO,OAAOC,CAAG,EAAK,CAAA,CAAC,CAAI,CAQ7K,IAACC,EAAS,SAAgBC,EAAOC,EAAS,CAClD,IAAIC,EAAKD,EAAQ,GACbE,EAAYF,EAAQ,UAExB,GAAI,CAACE,EACH,MAAM,IAAI,MAAM,0BAA0B,OAAOD,EAAI,iEAAiE,CAAC,EAIzH,OAAOE,EAAED,EAAWH,CAAK,CAC3B,EACWK,EAAuBC,EAAW,IAAI,EAC7CC,EAAO,KACAC,EAAeC,EAAU,CAElC,UAAW,UAAqB,CAC9BF,EAAO,IACR,EACD,MAAO,UAAiB,CACtB,OAAO,UAAY,CACjB,GAAI,CAACF,EAAqB,MAAO,MAAM,IAAI,MAAM,iDAAiD,EAClG,OAAOD,EAAEC,EAAqB,KAAK,CACzC,CACG,CACH,CAAC,EACM,SAASK,EAAYC,EAAMC,EAAY,CAC5C,IAAIC,EAAQF,EAAK,MACbG,EAAOH,EAAK,KACZI,EAAUJ,EAAK,QACfK,EAAWL,EAAK,SAChBM,EAAYN,EAAK,UACjBO,EAAgBP,EAAK,cACzBH,EAAa,OAAO,aAAeU,EACnC,IAAIC,EAAUJ,IAEd,GAAI,CAACI,EAAS,CACZF,EAAU,CACR,MAAO,8CAA+C,OAAOH,EAAM,QAAU,EAAE,OAAOD,EAAO,IAAK,EAClG,YAAaO,EAAOzB,IAAoBA,EAAkBC,EAAuB,CAAC;AAAA;AAAA;AAAA,OAA2O,CAAC,EAAE,CACtU,CAAK,EACD,MACD,CAEDoB,IACAX,EAAqB,MAAQc,EAExBZ,IACHA,EAAOC,EAAa,MAAMI,CAAU,EAExC,CC/CA,SAASS,EAA6BC,EAAS,CAC7C,OAAO,OAAOA,GAAY,WAAa,CACrC,OAAQA,EACR,KAAMA,EAAQ,IACf,EAAGA,CACN,CAEA,SAASC,EAAQC,EAAUC,EAAY,CACrC,IAAIC,EAAQF,EAEZ,OAAIE,GAAS,KACJ,KAGLD,EACK,OAAO,OAAO,CAAE,EAAEJ,EAA6BK,CAAK,EAAG,CAC5D,WAAY,OAAO,OAAO,CAAE,EAAEA,EAAM,YAAc,GAAI,CACpD,MAAOD,CACf,CAAO,CACP,CAAK,EAGI,CACL,OAAQ,UAAkB,CACxB,OAAOrB,EAAEsB,CAAK,CACf,CACL,CACA,CAEO,SAASC,EAAcZ,EAASa,EAAY,CACjD,OAAOA,EAAW,OAAO,SAAUC,EAAWC,EAAW,CACvD,OAAO,SAAU7B,EAAS,CACxB,IAAIyB,EACAK,EAAiBD,EAAU,SAAUE,EAAQ,CAC/C,OAAAN,EAAQG,EAAU,OAAO,OAAO,CAAA,EAAI5B,EAASgC,EAA2BD,CAAM,CAAC,CAAC,EACzEN,CACR,EAAEzB,CAAO,EAMV,OAJKyB,IACHA,EAAQG,EAAU5B,CAAO,GAGvB8B,IAAmBL,EACdA,EAGFH,EAAQQ,EAAgBL,CAAK,CAC1C,CACG,EAAE,SAAUzB,EAAS,CACpB,OAAOsB,EAAQR,EAAQd,CAAO,CAAC,CACnC,CAAG,CACH"}