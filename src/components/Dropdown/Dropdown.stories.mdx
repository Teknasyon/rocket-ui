import { Canvas, Meta, Story, ArgsTable } from '@storybook/addon-docs';
import { action } from '@storybook/addon-actions';

import Dropdown from './Dropdown.vue';

export const Default = (args) => ({
  components: { Dropdown },
  setup() {
    return { args };
  },
  template: `
      <div style="display: flex;">
        <Dropdown style="margin-right: 5px;" v-bind="args" />
        <Dropdown style="margin-right: 5px;" v-bind="args" />
        <Dropdown v-bind="args" content="" autoSize="false" />
      </div>
    `,
});

export const WithIcon = (args) => ({
  components: { Dropdown },
  setup() {
    return { args };
  },
  template: `<Dropdown v-bind="args" />`,
});

export const Placements = [
  'auto',
  'auto-start',
  'auto-end',
  'top',
  'top-start',
  'top-end',
  'right',
  'right-start',
  'right-end',
  'bottom',
  'bottom-start',
  'bottom-end',
  'left',
  'left-start',
  'left-end',
];

export const defaultArgs = {
  placement: {
    control: {
      type: 'select',
      options: Placements,
    },
    defaultValue: 'auto',
  },
  autoHide: { control: { type: 'boolean' }, defaultValue: true },
  distance: { control: { type: 'number' }, defaultValue: 10 },
  skidding: { control: { type: 'number' }, defaultValue: 0 },
  container: { control: { type: 'text' }, defaultValue: '.v-popper' },
  strategy: {
    control: {
      type: 'radio',
      options: ['absolute', 'fixed'],
    },
    defaultValue: 'absolute',
  },
  popperClass: {
    control: { type: 'text' },
    defaultValue: '',
  },
  shown: { control: { type: 'boolean' }, defaultValue: false },
  content: {
    description: 'The content of the dropdown',
    table: { category: 'For Input', defaultValue: { summary: 'null' } },
    control: {
      type: 'text',
    },
    defaultValue: 'Tooltip content',
  },
  delay: {
    control: {
      type: 'number',
    },
    defaultValue: 0,
  },
  disabled: {
    control: {
      type: 'boolean',
    },
    defaultValue: false,
  },
  flip: {
    control: {
      type: 'boolean',
    },
    defaultValue: true,
  },
  shift: {
    control: {
      type: 'boolean',
    },
    defaultValue: true,
  },
  autoSize: {
    control: {
      type: 'boolean',
    },
    defaultValue: true,
  },
  positioningDisabled: {
    control: {
      type: 'boolean',
    },
    defaultValue: false,
  },
  handleResize: {
    control: {
      type: 'boolean',
    },
    defaultValue: false,
  },
  arrowPadding: {
    control: {
      type: 'number',
    },
    defaultValue: 0,
  },
  options: {
    table: { category: 'For List' },
    control: {
      type: 'array',
    },
    defaultValue: [
      {
        label: 'Option 1',
        value: 'option1',
      },
      {
        label: 'Option 2',
        value: 'option2',
      },
      {
        label: 'Option 3',
        value: 'option3',
      },
      {
        label: 'Option 4',
        value: 'option4',
      },
      {
        label: 'Option 5',
        value: 'option5',
      },
    ],
  },
  selected: {
    table: { category: 'For List' },
    control: {
      type: 'array',
    },
    defaultValue: ['option5'],
  },
  multiple: {
    table: { category: 'For List' },
    control: {
      type: 'boolean',
    },
    defaultValue: false,
  },
  searchable: {
    table: { category: 'For List' },
    control: {
      type: 'boolean',
    },
    defaultValue: false,
    description: '<span>Searchable dropdown</span>',
  },
  actions: {
    table: { category: 'For List' },
    control: {
      type: 'boolean',
    },
    defaultValue: false,
  },
  icon: {
    table: { category: 'For Input' },
    control: {
      type: 'text',
    },
    defaultValue: '',
  },
  onShow: {
    control: {
      type: 'action',
    },
    action: 'show',
  },
  onHide: {
    control: {
      type: 'action',
    },
    action: 'hide',
  },
  onDispose: {
    control: {
      type: 'action',
    },
    action: 'dispose',
  },
  onResize: {
    control: {
      type: 'action',
    },
    action: 'resize',
  },
  onSelect: {
    control: {
      type: 'action',
    },
    action: 'select',
  },
  onCancel: {
    control: {
      type: 'action',
    },
    action: 'cancel',
  },
  onSubmit: {
    control: {
      type: 'action',
    },
    action: 'submit',
  },
};

<Meta
  title="Components/Dropdown"
  component={Dropdown}
  argTypes={{ ...defaultArgs }}
  parameters={{
    viewMode: 'docs',
  }}
/>

# Dropdown

Dropdown is a component that allows you to select one or more options from a list.
It can also be used as an input field with a dropdown list.

It is based on [Popper.js](https://popper.js.org/).

### Overview

<Canvas withSource="open">
  <Story name="Overview" argTypes={{ ...Default.argTypes }} args={{}}>
    {Default.bind({})}
  </Story>
</Canvas>

### Playground

> Changes you make in the controls will be reflected in the example above.

<ArgsTable
  story="Overview"
  exclude={
    /^(click|show|hide|dispose|resize|select|cancel|submit|default|on.*)$/
  }
/>

## Stories

### Default

<Canvas withSource="open">
  <Story name="Default" argTypes={{ ...Default.argTypes }} args={{}}>
    {Default.bind({})}
  </Story>
</Canvas>

### With Icon

<Canvas withSource="open">
  <Story
    name="With Icon"
    argTypes={{ ...WithIcon.argTypes }}
    args={{ content: '', autoSize: false }}
  >
    {WithIcon.bind({})}
  </Story>
</Canvas>
