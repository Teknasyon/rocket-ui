import { Canvas, Meta, Story, ArgsTable } from '@storybook/addon-docs';
import { action } from '@storybook/addon-actions';
import Alert from './Alert.vue';
import Icon from '../Icon/Icon.vue';

export const Default = (args) => ({
  components: { Alert },
  setup() {
    return { args, click: action('close') };
  },
  template: `<Alert v-bind="args" @close="click"/>`,
});

export const DefaultWithSlots = (args) => ({
  components: { Alert, Icon },
  setup() {
    return { args, onClick: action('close') };
  },
  template: `
  <Alert v-bind="args">
    <template #close>
      <Icon name="logout" @click="onClick" />
    </template>
  </Alert>`,
});

export const defaultArgs = {
  type: {
    control: {
      type: 'select',
      options: ['success', 'info', 'warning', 'error'],
    },
    defaultValue: 'success',
    table: {
      defaultValue: {
        summary: 'success',
        detail: 'success | info | warning | error',
      },
    },
    description: 'Type of alert',
  },
  title: {
    control: {
      type: 'text',
    },
    defaultValue: 'Alert Title',
  },
  description: {
    control: {
      type: 'text',
    },
    defaultValue:
      'A type of alert which appears in a layer above other content, visually similar to a mobile or desktop push notification.',
  },
  size: {
    control: {
      type: 'select',
      options: ['small', 'medium', 'large'],
    },
    defaultValue: 'medium',
    table: {
      defaultValue: {
        summary: 'medium',
        detail: 'small | medium | large ',
      },
    },
    description: 'Sizes of alert',
  },
  closable: {
    control: {
      type: 'boolean',
    },
    defaultValue: true,
  },
  closeText: {
    control: {
      type: 'text',
    },
    defaultValue: 'Close',
  },
};

<Meta
  title="Components/Alert"
  component={Alert}
  argTypes={{ ...defaultArgs }}
  parameters={{
    viewMode: 'docs',
  }}
/>

# Alert

Alert is a component that displays a message to the user. It can be used to display information, warning, error, or success messages.

It has a `close` slot that can be used to add a **custom close button**. The button emits a **click** event when the close button is clicked.

> The visibility should be controlled by the parent component.

### Overview

<Canvas withSource="open">
  <Story
    name="Overview"
    argTypes={{ ...Default.argTypes }}
    args={{ type: 'success' }}
  >
    {Default.bind({})}
  </Story>
</Canvas>

### Playground

> Changes you make in the controls will be reflected in the example above.

<ArgsTable story="Overview" exclude={/^(click|close|on.*)$/} />

## Stories

### Success

<Canvas withSource="open">
  <Story
    name="Success"
    argTypes={{ ...Default.argTypes }}
    args={{ type: 'success' }}
  >
    {Default.bind({})}
  </Story>
</Canvas>

### Error

<Canvas withSource="open">
  <Story
    name="Error"
    argTypes={{ ...Default.argTypes }}
    args={{ type: 'error' }}
  >
    {Default.bind({})}
  </Story>
</Canvas>

### Information

<Canvas withSource="open">
  <Story
    name="Information"
    argTypes={{ ...Default.argTypes }}
    args={{
      type: 'info',
    }}
  >
    {Default.bind({})}
  </Story>
</Canvas>

### Warning

<Canvas withSource="open">
  <Story
    name="Warning"
    argTypes={{ ...Default.argTypes }}
    args={{
      type: 'warning',
    }}
  >
    {Default.bind({})}
  </Story>
</Canvas>

## Customizable Slots

### `#close`

<Canvas withSource="open">
  <Story
    name="Custom Close Button"
    argTypes={{ ...Default.argTypes }}
    args={{
      type: 'info',
    }}
  >
    {DefaultWithSlots.bind({})}
  </Story>
</Canvas>
